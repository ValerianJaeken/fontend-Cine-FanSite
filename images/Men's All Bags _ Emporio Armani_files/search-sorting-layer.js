"use strict";!function($,$Y){var e=".sortRules",t='[data-component-name="gridr"]',s="filters-opened",n="filters-applied",o="filters-closing",i="open",a="click.sortinglayer",r=$('[data-component-name="search-sorting-layer"]'),d=r.find(e),c=$(".sort-by .label"),l=$("main.container"),u="dept-search grid-search"===$("[data-sr-type]").data("srType"),f=$Y.search.department,y=["newin","newclothing","newbags","newshoes","newaccessories","newea7"],m=void 0;var p=function(){var e=d.find(".Ranking.selected");e.length&&d.find(".Ranking").length>1&&(e.remove(),d.find(".Ranking").addClass("selected"),v("Ranking"))},v=function(e){var t=r.find('[data-ytos-option-value="'+e+'"] .text').text();c.empty().text(": "+t),r.addClass("active")},h=function(){m?(r.removeAttr("style"),setTimeout(function(){$(document).bind(a,function(e){var t=$(e.target);t.parents().hasClass("sorting-filter")&&!t.parent().hasClass("sort-by")||($Y.notify($Y.customEvents.CLOSE_SORTING_LAYER),$(document).unbind(a))})},400),r.addClass(i)):(yTos.notify(yTos.customEvents.OPEN_SITE_OVERLAY),setTimeout(function(){R(!0),r.animate({top:"0",opacity:"1"},800,function(){r.addClass(i)}),l.addClass(s)},400))},T=function(){m?r.removeClass(i):(r.animate({top:"100vh",opacity:"0"},800,function(){r.removeClass(i)}),setTimeout(function(){yTos.notify(yTos.customEvents.CLOSE_SITE_OVERLAY),R(!1)},800),l.removeClass(s))},E=function(){g(),T(),C()},C=function(){if(m)r.removeAttr("style").find(e).removeAttr("style");else{var t=r.find(".head").outerHeight()+r.find(".foot").outerHeight();d.css("height",$(window).outerHeight()-t)}},g=function(){m="undefined"==typeof obj?window.innerWidth>1023:obj.width>1023},R=function(e){e?($("html").addClass("html-is-locked"),u&&$(t).addClass(n)):($("html").removeClass("html-is-locked"),u&&$(t).removeClass(n))};$Y.watchOne({"yTos::HelperParsed::search.sortRules":function(e){"function"==typeof e&&(e.prototype.onListItemClicked=function(e){e.preventDefault();var t=$(e.currentTarget);t.siblings(".selected").removeClass("selected"),t.addClass("selected"),"radiobutton"===this.options.viewType.toLowerCase()&&(this.$el.find("input[type=radio]").prop("checked",!1),t.find("input[type=radio]").prop("checked",!0)),yTos.search.page=1,this.model.setFilter({key:"sortRule",value:t.data("ytosOptionValue")},!1),m&&($Y.notify($Y.customEvents.CLOSE_SORTING_LAYER),$(document).unbind(a))})},"yTos::HelperLoaded::search.resetFilters":function(){var e;g(),r.on(yTos.clickEvent,".close.btn",function(){yTos.notify(yTos.customEvents.CLOSE_SORTING_LAYER),l.addClass(o),setTimeout(function(){yTos.notify(yTos.customEvents.CLOSE_SITE_OVERLAY),l.removeClass(o)},400)}),(e={})[yTos.customEvents.OPEN_SORTING_LAYER]=h,e[yTos.customEvents.CLOSE_SORTING_LAYER]=T,e[$Y.customEvents.WINDOW_ORIENTATIONCHANGE]=E,$Y.watch(e),$Y.watch({"yTos::Search::filterAdded":function(e){void 0!==e.key&&"sortRule"===e.key&&v(e.value)}}),$Y.watchOne({"yTos::HelpersFinishedLoading":p()}),m||(C(),r.find(".sortRules .selected").removeClass("selected"))},"yTos::HelperLoaded::search.sortRules":function(){y.indexOf(f)>-1&&$('[data-ytos-option-value="DateDescending"]').trigger("click")}})}(jQuery,yTos);
//# sourceMappingURL=search-sorting-layer.js.map
