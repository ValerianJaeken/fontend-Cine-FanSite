"use strict";!function($,$Y){var n="hidden",e="anim-hidden",o="block",t='[data-component-name="header-usermenu"]',s=".my-account-layer",i=".not-logged-container",a=".logged-container",c=!1,d=null,r="Login"!==$Y.navigation.Action,u=function(){r||this.find(".account").hide(),m(this),l(this)},l=function(n){var e=n.find(s),o={};o[$Y.customEvents.CLOSE_ALL_LAYERS]=function(){return f(e)},$Y.watch(o),$Y.watch({"yTos::OpenLayer":function(){return f(e)},"yTos::Cart::ShowMiniCart":function(){return f(e)},"yTos::Account::UserSectionUpdated":function(){return m(n)},"yTos::Account::UserLoggedOut":y,"yTos::Account::UserLoggingOut":function(n){$Y.notify("yTos::Account::UserFinishedLogginOut")}})},f=function(t){t.hasClass(e)||(t.removeClass(o),t.addClass(e).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t.addClass(n).off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend")}))},m=function(t){var c=t.find(s);c.addClass(n),t.find('.user-section-menu [data-target="my-account"]').on($Y.clickEvent,function(t){var s;t.preventDefault(),t.stopImmediatePropagation(),c.hasClass(n)?(s=c,yTos.EventSequence([$Y.customEvents.CLOSE_ALL_LAYERS,$Y.customEvents.OPEN_ACCOUNT_LAYER]),$Y.notify($Y.customEvents.CLOSE_IF_CLICK_OUTSIDE,[s,$('[data-component-name="header-usermenu"] .mainCartLink')]),yTos.isLogged()?(s.addClass("logged"),s.find(i).addClass(n),s.find(a).removeClass(n)):(s.removeClass("logged"),s.find(i).removeClass(n),s.find(a).addClass(n)),s.removeClass(n).addClass(o).outerWidth(),s.removeClass(e).off()):f(c)}),t.find(".my-account-layer .close").on($Y.clickEvent,function(){$Y.notify($Y.customEvents.CLOSE_ALL_LAYERS)})},y=function(){c=!1,d=null};$Y.watchOne({"yTos::HelperLoaded::account.loginlayer":function(){$Y.helpers.Account.LoginLayer._updateGlobalMessages({"yTos::Account::LoginNeeded":function(){null!==d||c?c&&$Y.notify("yTos::OpenLayer",{content:d,cssClasses:["loginFormOpened"]}):(d=$('[data-content="customMyAccount"] .logged-container').clone(),c=!0,d.removeClass(n),$Y.notify("yTos::OpenLayer",{content:d,cssClasses:["loginFormOpened"]})),$Y.notify($Y.customEvents.CLOSE_IF_CLICK_OUTSIDE,$(".mfp-content"))}})}}),$Y.watch({"yTos::HelpersFinishedLoading":function(n){var e=[],o=document.querySelectorAll(t);e.push(o),[].forEach.call(e,function(n){var e=$(n);if(!0===e.data("initialized"))return!0;u.apply(e),e.data("initialized",!0)})},"yTos::HelperParsed::account.welcomeMessage":function(){var n=$(t).find(".welcomeMessage").find(".text");n.length&&(n.addClass(o),n.contents().filter(function(){return 3===this.nodeType}).remove())}})}(jQuery,yTos);
//# sourceMappingURL=header-usermenu.js.map
