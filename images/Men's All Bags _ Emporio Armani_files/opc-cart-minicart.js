"use strict";!function($,$Y){var e=$('[data-component-name="opc-cart-minicart"]').find(".preloader-container");function t(e,t){t.find("ul").data("numitems")>1&&t.find(".layer-container ").addClass("scrollable");var n=t.find(".scrollable");n.length&&(e?n.removeClass("nativeScroll").perfectScrollbar({suppressScrollX:!0}):n.addClass("nativeScroll").perfectScrollbar("destroy"))}$Y.watchOne({"yTos::HelperLoaded::cart.miniCart":function(n){var i=!0,a={};a[$Y.customEvents.CLOSE_ALL_LAYERS]=function(){$Y.notify("yTos::Cart::HideMiniCart")},$Y.watch({"yTos::Cart::ShowMiniCart":function(t){e.addClass("loading")},"yTos::Cart::HideMiniCart":function(){$(document).off("click.miniCart"),$(document).off("click.closeButton")},"yTos::Cart::MiniCartUpdated":function(){t("mobile"!==$Y.device,n.$el)},"Store::DeviceType":function(e){t("mobile"!==e.device,n.$el),"mobile"===e.device&&$Y.notify("yTos::Cart::HideMiniCart")},"yTos::Cart::MiniCartVisible":function(){n.$el.find(".scrollable").perfectScrollbar("mobile"!==$Y.device),e.removeClass("loading"),i&&(n.$el.on("click",".closeButton",function(e){$Y.notify("yTos::Cart::HideMiniCart")}),i=!1),setTimeout(function(){$Y.notify($Y.customEvents.CLOSE_IF_CLICK_OUTSIDE,[n.$el[0],$('[data-component-name="header-usermenu"] .mainCartLink')])},100)}}),$Y.watch(a),$Y.watch({"yTos::Cart::CartLinkClicked":function(){$Y.hasMobileBehaviour&&(location.href=$('[data-component-name="header-usermenu"] .mainCartLink a').attr("href"))}})}})}(jQuery,yTos);
//# sourceMappingURL=opc-cart-minicart.js.map
