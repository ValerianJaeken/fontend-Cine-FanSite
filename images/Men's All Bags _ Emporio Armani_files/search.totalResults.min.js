define(["ytos.search"],function(){return yTos.utils.namespace("yTos.helpers.Search.TotalResults"),yTos.helpers.Search.TotalResults=yTos.helpers.base.extend({initialize:function(){this.model=yTos.models.Searches({scope:"mainSearch"}),this.updateHTML(!0)},globalMessages:{"yTos::Search::filtersFullReset":"updateHTML","yTos::Search::filtersUpdated":"updateHTML","yTos::Search::filterReset":"updateCounter","yTos::Search::filterAdded":"updateCounter","yTos::Search::filterRemoved":"updateCounter"},updateCounter:function(a){return"sortRule"===a.key?!1:void this.updateHTML()},updateHTML:function(a){var b=this.model.getEscapedFilters(),c=this.model.get("filters"),d="undefined"==typeof c.gender||0===c.gender.length?"U,D,E":c.gender;this.getHTML("/yTos/Plugins/SearchPlugin/RenderTotalResults/"+yTos.navigation.SiteCode+"/"+d+"/?apiRequest="+b+"&showLabel="+this.options.showLabel,{success:function(){this.notify("yTos::Search::TotalItemsUpdated"),a&&(this.notify("yTos::Search::TotalItemsUpdatedOnLoad"),this.$el.addClass("totalsUpdatedOnLoad"))}.bind(this),stripMe:!0,autoUpdate:!0})}}),yTos.helpers.Search.TotalResults});