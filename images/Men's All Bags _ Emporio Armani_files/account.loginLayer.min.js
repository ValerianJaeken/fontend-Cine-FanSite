define("account.loginLayer",["ytos.account","ui.layer","ui.ajaxForm"],function(){return yTos.utils.namespace("yTos.helpers.Account.LoginLayer"),yTos.helpers.Account.LoginLayer=function(){var a=yTos.helpers.base.extend({initialize:function(){this.isEmpty=!0,$("*[data-ytos-ctrl='account.loginPage']").length&&this.destroy()},globalMessages:{"yTos::Account::LoginFormReady":"yTos::OpenLayer","yTos::Account::UserLoggedIn":"yTos::CloseLayer","yTos::Account::UserLoginError":"yTos::UpdateLayer","yTos::Account::LoginNeeded":"onLoginRequested"},onLoginRequested:function(a){"undefined"!=typeof a&&"undefined"!=typeof a.callback&&$Y.watchOne({"yTos::Account::UserLoggedIn":a.callback}),"undefined"!=typeof a?this.getLoginLayerContent(null,a.layerContextArea,a.loginFormOptions):this.getLoginLayerContent()},getLoginLayerContent:function(a,b,c){this.postHTML("/yTos/Plugins/AccountPlugin/RenderLoginLayer",{data:{layerContextArea:b,loginOptions:c},success:$.proxy(function(a){this.isEmpty=!1,this.notify("yTos::Account::LoginFormReady",{content:a})},this),autoUpdate:!0}),a&&a.preventDefault()}});return new a}(),$Y.notify("yTos::HelperLoaded::account.loginlayer",this),yTos.helpers.Account.LoginLayer});