"use strict";!function($,$Y){var t='[data-component-name="search-active-search"]',n="open",e=".searches",i=".search-all",o="#suggestionContainer",s="",a="",c="",r="",u=$('[data-component-name="text-search-layer"]'),d=function(){$(t).length&&(r=$(t).data("term"))},f=function(){var t={};t[yTos.customEvents.OPEN_SEARCH_LAYER]=C,t[yTos.customEvents.CLOSE_SEARCH_LAYER]=O,t[yTos.customEvents.MODAL_OFF]=O,$Y.watch(t),$Y.watch({"yTos::Search::FaytSearchStarted":m,"yTos::Search::FaytSuggestionListOpened":function(){h(),L()}})},h=function(){c=u.find("#searchInput").val(),u.find(i).find(".term").html("'"+c+"'"),u.find(i).show()},l=function(){"0"==u.data("placeholderSet")&&(s=u.data("placeholder"),u.find("#searchInput").attr("placeholder",s),u.attr("data-placeholder-set","1"))},p=function(){a=$("<span/>",{id:"resetSearch"}).css({display:"none"}),u.find("form").append(a),u.find("#resetSearch").on($Y.clickEvent,function(){y()})},y=function(){u.find("#searchInput").val(""),S(),T(),E()},g=function(){var t=u.find(o).detach();u.find(".inner").append(t)},v=function(){u.find(i).find("a").on(yTos.clickEvent,function(){u.find("form").submit()})},m=function(){u.find("#resetSearch").show()},S=function(){u.find("#resetSearch").hide()},E=function(){u.find(e).slideDown()},L=function(){u.find(e).slideUp()},T=function(){u.find(o).slideUp().removeClass(n),u.find(i).hide()},C=function(){x(!0),setTimeout(function(){u.addClass(n),""!==r&&u.find("#searchInput").val(r),setTimeout(function(){u.find("#searchInput").trigger("focus")},300)},200)},O=function(){u.removeClass(n),y(),setTimeout(function(){x(!1)},200)},x=function(t){t?$("html,body").addClass("uiLayer-is-locked"):$("html,body").removeClass("uiLayer-is-locked")};$Y.watchOne({"yTos::HelperParsed::search.textBox":function(t){t.prototype.disableListNavigation=function(){},t.prototype.enableListNavigation=function(){},t.prototype.updateSuggestions=function(t){var n=t.currentTarget.value;this.$textSearchInput.val(n),u.find(i).find(".term").html("'"+n+"'"),n.length>this.options.QueryMinLength&&n!==this.defaults.previousQuery?(this.defaults.previousQuery=this.defaults.query=n,this.getSuggestions()):n.length>this.options.QueryMinLength&&(this.openSuggestionList(),h()),n.length<=this.options.QueryMinLength&&(S(),T(),E())},t.prototype.openSuggestionList=function(t){var n,e;this.$suggestionContainer.hasClass("open")||(this.$suggestionContainer.slideDown(),this.$suggestionContainer.addClass("open"),this.enableListNavigation(),this.notify("yTos::Search::FaytSuggestionListOpened")),n=this.$textSearchInput.val(),e=new RegExp(n,"g"),u.find(o+" a span").remove(),u.find(o+" a").each(function(t,i){var o=$(i).text().trim();-1!==o.indexOf(n)&&$(i).html(o.replace(e,"<b>"+n+"</b>"))})}},"yTos::HelperLoaded::search.textBox":function(){u.on(yTos.clickEvent,".close",function(){yTos.notify(yTos.customEvents.CLOSE_SEARCH_LAYER),setTimeout(function(){yTos.notify(yTos.customEvents.CLOSE_SITE_OVERLAY)},800)}),l(),p(),g(),v(),d(),f()}})}(jQuery,yTos);
//# sourceMappingURL=text-search-layer.js.map
