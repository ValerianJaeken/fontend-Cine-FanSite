define(["ytos.search","ui.selectAsList"],function(a,b){return yTos.utils.namespace("yTos.helpers.Search.SortRules"),yTos.helpers.Search.SortRules=yTos.helpers.base.extend({initialize:function(){var a;this.model=yTos.models.Searches({scope:"mainSearch"}),a=this.model.get("filters"),"undefined"!=typeof a&&""!==a.sortRule&&this.setSelectedSortRule(a.sortRule),"dropdownlist"===this.options.viewType.toLowerCase()&&(this.selectPlaceholder=this.$el.find("select").children("option[value='']").text())},events:function(){return"dropdownlist"===this.options.viewType.toLowerCase()?{"select change":"onSelectChanged"}:{"li click":"onListItemClicked"}},requiredHelpers:{SelectAsList:b},onSelectChanged:function(a){a.preventDefault();var b=$(a.currentTarget).val(),c=this.$el.find("select"),d=""!==c.val()?this.options.resetLabel:this.selectPlaceholder;c.children("option[value='']").text(d);var e=c.data("ytos-dropdown");if("undefined"!=typeof e){for(var f in e.selectize.options)e.selectize.options.hasOwnProperty(f)&&""===f&&(e.selectize.options[f].text=d);e.update(c)}this.model.setFilter({key:"sortRule",value:b},!1)},onListItemClicked:function(a){var b=$(a.currentTarget);b.siblings(".selected").removeClass("selected"),b.addClass("selected"),"radiobutton"===this.options.viewType.toLowerCase()&&(this.$("input[type=radio]").prop("checked",!1),b.find("input[type=radio]").prop("checked",!0)),this.model.setFilter({key:"sortRule",value:b.data("ytosOptionValue")},!1)},setSelectedSortRule:function(a){if("dropdownlist"===this.options.viewType.toLowerCase()){var b=this.$el.find("select"),c=b.data("ytosDropdown");c?c.set(b,a):b.val(a)}else{var d=this.$el.find("[data-ytos-option-value='"+a+"']");d.addClass("selected"),"radiobutton"===this.options.viewType.toLowerCase()&&(this.$el.find("input[type=radio]").prop("checked",!1),d.find("input[type=radio]").prop("checked",!0))}}}),yTos.helpers.Search.SortRules});